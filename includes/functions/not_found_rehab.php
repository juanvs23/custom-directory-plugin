<?php

if(!function_exists('not_found_rehab_fn')){
    function not_found_rehab_fn($taxonomy="",$term=''){
        $search_posts = [];
            $args = [
                'post_type' => 'coltman_addic_clinic',
                'post_status' => 'publish',
                'posts_per_page' => 6,
                'tax_query' => [
                    [
                        'taxonomy' => $taxonomy,
                        'field' => 'term_id',
                        'terms' => $term
                    ]
                ]
            ];
            $search_posts =  get_posts($args);
    
        
        $logo ='';
        if(count($search_posts)>0){
            $logo = '<svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 96 96" fill="none">
  <rect width="96" height="96" rx="16" fill="#E8F6E3"/>
  <path d="M72.3001 74.9999L66.5032 69.203M66.5032 69.203C68.2384 67.4668 69.2135 65.1128 69.214 62.6582C69.2142 60.5161 68.4716 58.4403 67.1129 56.7843C65.7541 55.1284 63.8631 53.9949 61.7623 53.5769C59.6614 53.1589 57.4806 53.4824 55.5914 54.4921C53.7023 55.5018 52.2218 57.1354 51.4021 59.1144C50.5824 61.0934 50.4743 63.2954 51.0962 65.3452C51.7181 67.395 53.0315 69.1657 54.8127 70.3556C56.5938 71.5456 58.7324 72.081 60.8641 71.8709C62.9959 71.6607 64.9887 70.7178 66.5032 69.203Z" stroke="#52776C" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M45.3001 75H44.563C35.761 75 31.3546 75 28.2982 72.8454C27.4284 72.2354 26.6509 71.5034 25.9897 70.6719C23.7001 67.7937 23.7001 63.6519 23.7001 55.3629V48.4914C23.7001 40.4913 23.7001 36.4899 24.9664 33.2958C27.0022 28.1577 31.306 24.1077 36.7654 22.1907C40.1566 21 44.4037 21 52.9087 21C57.7633 21 60.1933 21 62.1319 21.6804C65.2504 22.7766 67.7101 25.0905 68.8738 28.0254C69.6001 29.8506 69.6001 32.1375 69.6001 36.7086V48" stroke="#52776C" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M23.7001 48C23.7001 45.6133 24.6482 43.3243 26.3358 41.6367C28.0235 39.949 30.3125 39.0009 32.6992 39.0009C34.4974 39.0009 36.6169 39.3141 38.3638 38.847C39.1271 38.6416 39.823 38.2391 40.3817 37.6799C40.9404 37.1207 41.3423 36.4245 41.5471 35.661C42.0142 33.9141 41.701 31.7946 41.701 29.9964C41.7017 27.6102 42.6501 25.3219 44.3377 23.6348C46.0253 21.9477 48.3138 21 50.7001 21" stroke="#52776C" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
</svg>';
        }else{
            $logo ='<svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 96 96" fill="none">
  <rect width="96" height="96" rx="16" fill="#E8F6E3"/>
  <path d="M84.608 54.0718C84.048 54.0718 83.584 53.8958 83.216 53.5438C82.864 53.1918 82.688 52.7678 82.688 52.2718C82.688 51.7598 82.864 51.3278 83.216 50.9758C83.584 50.6238 84.048 50.4478 84.608 50.4478C85.168 50.4478 85.624 50.6238 85.976 50.9758C86.344 51.3278 86.528 51.7598 86.528 52.2718C86.528 52.7678 86.344 53.1918 85.976 53.5438C85.624 53.8958 85.168 54.0718 84.608 54.0718Z" fill="#52776C"/>
  <path d="M78.8424 54.0718C78.2824 54.0718 77.8184 53.8958 77.4504 53.5438C77.0984 53.1918 76.9224 52.7678 76.9224 52.2718C76.9224 51.7598 77.0984 51.3278 77.4504 50.9758C77.8184 50.6238 78.2824 50.4478 78.8424 50.4478C79.4024 50.4478 79.8584 50.6238 80.2104 50.9758C80.5784 51.3278 80.7624 51.7598 80.7624 52.2718C80.7624 52.7678 80.5784 53.1918 80.2104 53.5438C79.8584 53.8958 79.4024 54.0718 78.8424 54.0718Z" fill="#52776C"/>
  <path d="M73.0767 54.0718C72.5167 54.0718 72.0527 53.8958 71.6847 53.5438C71.3327 53.1918 71.1567 52.7678 71.1567 52.2718C71.1567 51.7598 71.3327 51.3278 71.6847 50.9758C72.0527 50.6238 72.5167 50.4478 73.0767 50.4478C73.6367 50.4478 74.0927 50.6238 74.4447 50.9758C74.8127 51.3278 74.9967 51.7598 74.9967 52.2718C74.9967 52.7678 74.8127 53.1918 74.4447 53.5438C74.0927 53.8958 73.6367 54.0718 73.0767 54.0718Z" fill="#52776C"/>
  <path d="M64.0674 54.1919C63.0114 54.1919 62.0834 54.0239 61.2834 53.6879C60.4834 53.3359 59.8434 52.8559 59.3634 52.2479C58.8834 51.6399 58.5954 50.9359 58.4994 50.1359H61.5954C61.6914 50.5999 61.9474 50.9999 62.3634 51.3359C62.7954 51.6559 63.3474 51.8159 64.0194 51.8159C64.6914 51.8159 65.1794 51.6799 65.4834 51.4079C65.8034 51.1359 65.9634 50.8239 65.9634 50.4719C65.9634 49.9599 65.7394 49.6159 65.2914 49.4399C64.8434 49.2479 64.2194 49.0639 63.4194 48.8879C62.9074 48.7759 62.3874 48.6399 61.8594 48.4799C61.3314 48.3199 60.8434 48.1199 60.3954 47.8799C59.9634 47.6239 59.6114 47.3039 59.3394 46.9199C59.0674 46.5199 58.9314 46.0319 58.9314 45.4559C58.9314 44.3999 59.3474 43.5119 60.1794 42.7919C61.0274 42.0719 62.2114 41.7119 63.7314 41.7119C65.1394 41.7119 66.2594 42.0399 67.0914 42.6959C67.9394 43.3519 68.4434 44.2559 68.6034 45.4079H65.6994C65.5234 44.5279 64.8594 44.0879 63.7074 44.0879C63.1314 44.0879 62.6834 44.1999 62.3634 44.4239C62.0594 44.6479 61.9074 44.9279 61.9074 45.2639C61.9074 45.6159 62.1394 45.8959 62.6034 46.1039C63.0674 46.3119 63.6834 46.5039 64.4514 46.6799C65.2834 46.8719 66.0434 47.0879 66.7314 47.3279C67.4354 47.5519 67.9954 47.8959 68.4114 48.3599C68.8274 48.8079 69.0354 49.4559 69.0354 50.3039C69.0514 51.0399 68.8594 51.7039 68.4594 52.2959C68.0594 52.8879 67.4834 53.3519 66.7314 53.6879C65.9794 54.0239 65.0914 54.1919 64.0674 54.1919Z" fill="#52776C"/>
  <path d="M43.4911 59.1839V41.9999H46.2271L46.5631 43.7039C46.9471 43.1759 47.4511 42.7119 48.0751 42.3119C48.7151 41.9119 49.5391 41.7119 50.5471 41.7119C51.6671 41.7119 52.6671 41.9839 53.5471 42.5279C54.4271 43.0719 55.1231 43.8159 55.6351 44.7599C56.1471 45.7039 56.4031 46.7759 56.4031 47.9759C56.4031 49.1759 56.1471 50.2479 55.6351 51.1919C55.1231 52.1199 54.4271 52.8559 53.5471 53.3999C52.6671 53.9279 51.6671 54.1919 50.5471 54.1919C49.6511 54.1919 48.8671 54.0239 48.1951 53.6879C47.5231 53.3519 46.9791 52.8799 46.5631 52.2719V59.1839H43.4911ZM49.8991 51.5039C50.8751 51.5039 51.6831 51.1759 52.3231 50.5199C52.9631 49.8639 53.2831 49.0159 53.2831 47.9759C53.2831 46.9359 52.9631 46.0799 52.3231 45.4079C51.6831 44.7359 50.8751 44.3999 49.8991 44.3999C48.9071 44.3999 48.0911 44.7359 47.4511 45.4079C46.8271 46.0639 46.5151 46.9119 46.5151 47.9519C46.5151 48.9919 46.8271 49.8479 47.4511 50.5199C48.0911 51.1759 48.9071 51.5039 49.8991 51.5039Z" fill="#52776C"/>
  <path d="M34.6484 54.1919C33.4964 54.1919 32.4564 53.9279 31.5284 53.3999C30.6164 52.8719 29.8884 52.1439 29.3444 51.2159C28.8164 50.2719 28.5524 49.1839 28.5524 47.9519C28.5524 46.7199 28.8244 45.6399 29.3684 44.7119C29.9124 43.7679 30.6404 43.0319 31.5524 42.5039C32.4804 41.9759 33.5204 41.7119 34.6724 41.7119C35.8084 41.7119 36.8324 41.9759 37.7444 42.5039C38.6724 43.0319 39.4004 43.7679 39.9284 44.7119C40.4724 45.6399 40.7444 46.7199 40.7444 47.9519C40.7444 49.1839 40.4724 50.2719 39.9284 51.2159C39.4004 52.1439 38.6724 52.8719 37.7444 53.3999C36.8164 53.9279 35.7844 54.1919 34.6484 54.1919ZM34.6484 51.5279C35.4484 51.5279 36.1444 51.2319 36.7364 50.6399C37.3284 50.0319 37.6244 49.1359 37.6244 47.9519C37.6244 46.7679 37.3284 45.8799 36.7364 45.2879C36.1444 44.6799 35.4564 44.3759 34.6724 44.3759C33.8564 44.3759 33.1524 44.6799 32.5604 45.2879C31.9844 45.8799 31.6964 46.7679 31.6964 47.9519C31.6964 49.1359 31.9844 50.0319 32.5604 50.6399C33.1524 51.2319 33.8484 51.5279 34.6484 51.5279Z" fill="#52776C"/>
  <path d="M17.896 54.1919C16.216 54.1919 14.744 53.8239 13.48 53.0879C12.232 52.3519 11.248 51.3359 10.528 50.0399C9.82405 48.7279 9.47205 47.2159 9.47205 45.5039C9.47205 43.7919 9.82405 42.2879 10.528 40.9919C11.248 39.6799 12.232 38.6559 13.48 37.9199C14.744 37.1839 16.216 36.8159 17.896 36.8159C19.56 36.8159 21.024 37.1839 22.288 37.9199C23.552 38.6559 24.536 39.6799 25.24 40.9919C25.944 42.2879 26.296 43.7919 26.296 45.5039C26.296 47.2159 25.944 48.7279 25.24 50.0399C24.536 51.3359 23.552 52.3519 22.288 53.0879C21.024 53.8239 19.56 54.1919 17.896 54.1919ZM17.896 51.4319C19.496 51.4319 20.768 50.9039 21.712 49.8479C22.672 48.7919 23.152 47.3439 23.152 45.5039C23.152 43.6639 22.672 42.2159 21.712 41.1599C20.768 40.1039 19.496 39.5759 17.896 39.5759C16.296 39.5759 15.016 40.1039 14.056 41.1599C13.096 42.2159 12.616 43.6639 12.616 45.5039C12.616 47.3439 13.096 48.7919 14.056 49.8479C15.016 50.9039 16.296 51.4319 17.896 51.4319Z" fill="#52776C"/>
</svg>';
        }
        $html = '';
        $html .= '<div class="not-found-rehab">';
        $html .= '<div class="not-found-rehab-logo">';
        $html .= $logo;
        $html .= '</div>';
        $html .= '<div class="not-found-rehab-content">';
        $html .= '<div class="not-found-rehab-title">';
        $html .= '<h2>No rehabs found</h2>';
        $html .= '<div class="not-found-rehab-text"> <p> Sorry, we couldnâ€™t locate any treatment centers with that criteria.</p> ';
        $html .= '</div>';
        if(count($search_posts)>0){
            $html .= '<h3>Here are some alternatives close by.</h3>';
        }
        $html .= '</div>';
        if(count($search_posts)>0){
            $html .= '<div class="not-found-rehab-wrapper" >';
            $html .= '<div class="not-found-rehab-list" onMousedown="dragStart(event,this)" onMousemove="dragMove(event,this)" onMouseup="dragEnd(event,this)">';
            foreach ($search_posts as $rehab) {
                $html .= '<div class="not-found-rehab-item" >';
                $html .= coltman_get_rehab_card($rehab);
                $html .='</div>';
               

            }
            wp_reset_postdata();
            $html .= '</div>';
            $html .='</div>';
        }
        $html .= '</div>';
        $html .= '</div>';
        return $html;
    }
}